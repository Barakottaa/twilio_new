/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/bird/webhook/route";
exports.ids = ["app/api/bird/webhook/route"];
exports.modules = {

/***/ "(rsc)/./app/api/bird/webhook/route.ts":
/*!***************************************!*\
  !*** ./app/api/bird/webhook/route.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_bird_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/bird-service */ \"(rsc)/./lib/bird-service.ts\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst dynamic = 'force-dynamic';\n// Helper function to log to file\nfunction logToFile(message) {\n    try {\n        const logDir = path__WEBPACK_IMPORTED_MODULE_3__.join(process.cwd(), '..', 'logs');\n        if (!fs__WEBPACK_IMPORTED_MODULE_2__.existsSync(logDir)) {\n            fs__WEBPACK_IMPORTED_MODULE_2__.mkdirSync(logDir, {\n                recursive: true\n            });\n        }\n        const logFile = path__WEBPACK_IMPORTED_MODULE_3__.join(logDir, 'webhook-debug.log');\n        const timestamp = new Date().toISOString();\n        fs__WEBPACK_IMPORTED_MODULE_2__.appendFileSync(logFile, `[${timestamp}] ${message}\\n`);\n    } catch (error) {\n        console.error('Failed to write to log file:', error);\n    }\n}\n// üü¢ Bird Webhook endpoint\nasync function POST(req) {\n    try {\n        logToFile('=== NEW WEBHOOK REQUEST ===');\n        const body = await req.json();\n        logToFile(`Incoming Body: ${JSON.stringify(body, null, 2)}`);\n        console.log('üì© Incoming Bird event:', JSON.stringify(body, null, 2));\n        // Handle Bird's actual payload format\n        const event = body.event;\n        const payload = body.payload;\n        // Extract contact info from the actual Bird format\n        let contact = null;\n        let postbackPayload = null;\n        if (event === 'whatsapp.inbound' && payload) {\n            // Get contact from sender\n            contact = payload.sender?.contact?.identifierValue;\n            // Check if there are actions with postback in the body.text.actions\n            if (payload.body?.text?.actions && payload.body.text.actions.length > 0) {\n                const postbackAction = payload.body.text.actions.find((action)=>action.type === 'postback');\n                if (postbackAction) {\n                    postbackPayload = postbackAction.postback?.payload;\n                }\n            }\n        }\n        console.log('üîç Extracted data:', {\n            event,\n            contact,\n            postbackPayload\n        });\n        logToFile(`Extracted - Event: ${event}, Contact: ${contact}, Postback: ${postbackPayload}`);\n        // Handle button clicks (postbacks) and text messages\n        if (event === 'whatsapp.inbound' && contact) {\n            logToFile('Processing whatsapp.inbound event');\n            console.log('üéØ Processing webhook - event:', event, 'contact:', contact, 'postbackPayload:', postbackPayload);\n            let replyText = '';\n            let shouldConvertPdf = false;\n            // Handle button clicks (postbacks)\n            if (postbackPayload) {\n                logToFile(`Postback payload found: ${postbackPayload}`);\n                console.log('üéØ Postback payload found:', postbackPayload);\n                const normalizedPayload = postbackPayload.trim().toLowerCase();\n                logToFile(`Normalized payload: ${normalizedPayload}`);\n                console.log('Checking postbackPayload:', postbackPayload, 'normalized:', normalizedPayload);\n                if (normalizedPayload === 'pay_instapay') {\n                    logToFile('Matched: pay_instapay');\n                    replyText = 'ÿØŸá ÿ±ŸÇŸÖ ÿßŸÜÿ≥ÿ™ÿßÿ®ÿßŸä 01005648997 ÿ≠ŸàŸÑ ÿπŸÑŸäŸá Ÿàÿßÿ®ÿπÿ™ ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπŸÑŸä ÿ±ŸÇŸÖ 01120035300';\n                } else if (normalizedPayload === 'pay_vcash') {\n                    logToFile('Matched: pay_vcash');\n                    replyText = 'ÿØŸá ÿ±ŸÇŸÖ ŸÅŸàÿØÿßŸÅŸàŸÜ ŸÉÿßÿ¥ 01120035300 ÿ≠ŸàŸÑ ÿπŸÑŸäŸá Ÿàÿßÿ®ÿπÿ™ ÿµŸàÿ±ÿ© ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ ÿπÿ¥ÿßŸÜ ŸÜÿ≥ÿ¨ŸÑ ÿßŸÑÿ™ÿ≠ŸàŸäŸÑ';\n                } else if (normalizedPayload === 'image') {\n                    logToFile('Matched: image - Setting up PDF conversion');\n                    shouldConvertPdf = true;\n                    replyText = 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿµŸàÿ± Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸáÿß ŸÑŸÉ...';\n                    console.log('üéØ Image postback detected - shouldConvertPdf:', shouldConvertPdf, 'replyText:', replyText);\n                } else {\n                    logToFile(`Unhandled postback payload: ${postbackPayload}`);\n                    console.log('Unhandled postback payload:', postbackPayload);\n                }\n            } else if (payload.body?.text?.body) {\n                const messageText = payload.body.text.body.toLowerCase();\n                if (messageText.includes('image')) {\n                    shouldConvertPdf = true;\n                    replyText = 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸàŸäŸÑ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ•ŸÑŸâ ÿµŸàÿ± Ÿàÿ•ÿ±ÿ≥ÿßŸÑŸáÿß ŸÑŸÉ...';\n                }\n            }\n            // Send text reply if we have one\n            if (replyText) {\n                logToFile(`Sending text reply to ${contact}: ${replyText}`);\n                try {\n                    const result = await (0,_lib_bird_service__WEBPACK_IMPORTED_MODULE_1__.sendBirdMessage)(contact, replyText);\n                    logToFile(`Send result: ${JSON.stringify(result)}`);\n                    if (result.success) {\n                        console.log('‚úÖ Reply sent successfully to', contact);\n                        logToFile(`‚úÖ Reply sent successfully`);\n                    } else {\n                        console.log('‚ö†Ô∏è Reply failed:', result.error);\n                        logToFile(`‚ö†Ô∏è Reply failed: ${result.error}`);\n                        console.log('üìù Would have sent to', contact, ':', replyText);\n                    }\n                } catch (error) {\n                    logToFile(`‚ö†Ô∏è Exception during send: ${error}`);\n                    console.log('‚ö†Ô∏è Bird message send failed:', error);\n                    console.log('üìù Would have sent to', contact, ':', replyText);\n                }\n            }\n            // Convert PDF to images if requested\n            if (shouldConvertPdf) {\n                logToFile(`Starting PDF conversion for ${contact}`);\n                try {\n                    console.log('üîÑ Converting PDF to images for', contact);\n                    const pdfServiceUrl = 'http://localhost:3002/pdf-to-image';\n                    logToFile(`Calling PDF service at: ${pdfServiceUrl}`);\n                    const response = await fetch(pdfServiceUrl, {\n                        method: 'POST',\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify({\n                            patient_number: contact,\n                            message: payload.body?.text?.body || 'image'\n                        })\n                    });\n                    if (response.ok) {\n                        const result = await response.json();\n                        logToFile(`PDF conversion response: ${JSON.stringify(result)}`);\n                        console.log('‚úÖ PDF conversion successful:', result.message);\n                        // Send each converted image via WhatsApp\n                        if (result.images && result.images.length > 0) {\n                            logToFile(`Found ${result.images.length} images to send`);\n                            console.log(`üì§ Sending ${result.images.length} images via WhatsApp`);\n                            for (const imageName of result.images){\n                                try {\n                                    // Get the full path to the image file\n                                    const imagePath = `D:\\\\Results\\\\${result.folder}\\\\images\\\\${imageName}`;\n                                    console.log(`üì∏ Uploading image: ${imagePath} to Bird`);\n                                    // Upload image to Bird and get media URL\n                                    const mediaUrl = await (0,_lib_bird_service__WEBPACK_IMPORTED_MODULE_1__.uploadImageToBird)(imagePath);\n                                    console.log(`üì§ Got media URL from Bird: ${mediaUrl}`);\n                                    // Send the image via WhatsApp using the media URL\n                                    const imageResult = await (0,_lib_bird_service__WEBPACK_IMPORTED_MODULE_1__.sendBirdImageMessage)(contact, mediaUrl, `ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿπŸÖŸÑ - ÿµŸÅÿ≠ÿ© ${result.images.indexOf(imageName) + 1}`);\n                                    if (imageResult.success) {\n                                        console.log(`‚úÖ Image sent successfully: ${imageName}`);\n                                    } else {\n                                        console.log(`‚ö†Ô∏è Failed to send image ${imageName}:`, imageResult.error);\n                                    }\n                                } catch (imageError) {\n                                    console.log('‚ö†Ô∏è Failed to send image:', imageError);\n                                }\n                            }\n                        }\n                    } else {\n                        logToFile(`‚ö†Ô∏è PDF conversion failed: ${response.statusText}`);\n                        console.log('‚ö†Ô∏è PDF conversion failed:', response.statusText);\n                    }\n                } catch (error) {\n                    logToFile(`‚ö†Ô∏è PDF conversion error: ${error}`);\n                    console.log('‚ö†Ô∏è PDF conversion error:', error);\n                }\n            }\n            if (!replyText && !shouldConvertPdf) {\n                logToFile('No action configured for this message');\n                console.log('‚ÑπÔ∏è No action configured for this message');\n            }\n        } else {\n            logToFile(`Event not handled - Event: ${event}, hasContact: ${!!contact}, hasPostback: ${!!postbackPayload}`);\n            console.log('‚ÑπÔ∏è Event not handled:', {\n                event,\n                hasContact: !!contact,\n                hasPostback: !!postbackPayload\n            });\n        }\n        logToFile('=== WEBHOOK REQUEST COMPLETED ===\\n');\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (err) {\n        console.error('‚ùå Bird webhook error:', err.message);\n        console.error('‚ùå Error stack:', err.stack);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal Server Error'\n        }, {\n            status: 500\n        });\n    }\n}\n// Handle other HTTP methods\nasync function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method Not Allowed'\n    }, {\n        status: 405\n    });\n}\nasync function PUT() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method Not Allowed'\n    }, {\n        status: 405\n    });\n}\nasync function DELETE() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method Not Allowed'\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNGLE9BQU87WUFDTHRCLFVBQVUsQ0FBQywyQkFBMkIsRUFBRXVCLE1BQU0sY0FBYyxFQUFFLENBQUMsQ0FBQ0UsUUFBUSxlQUFlLEVBQUUsQ0FBQyxDQUFDQyxpQkFBaUI7WUFDNUdYLFFBQVFPLEdBQUcsQ0FBQyx5QkFBeUI7Z0JBQUVDO2dCQUFPdUMsWUFBWSxDQUFDLENBQUNyQztnQkFBU3NDLGFBQWEsQ0FBQyxDQUFDckM7WUFBZ0I7UUFDdEc7UUFFQTFCLFVBQVU7UUFDVixPQUFPUCxxREFBWUEsQ0FBQzBCLElBQUksQ0FBQztZQUFFMEIsU0FBUztRQUFLO0lBQzNDLEVBQUUsT0FBT21CLEtBQVU7UUFDakJqRCxRQUFRRCxLQUFLLENBQUMseUJBQXlCa0QsSUFBSS9ELE9BQU87UUFDbERjLFFBQVFELEtBQUssQ0FBQyxrQkFBa0JrRCxJQUFJQyxLQUFLO1FBQ3pDLE9BQU94RSxxREFBWUEsQ0FBQzBCLElBQUksQ0FDdEI7WUFBRUwsT0FBTztRQUF3QixHQUNqQztZQUFFb0QsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSw0QkFBNEI7QUFDckIsZUFBZUM7SUFDcEIsT0FBTzFFLHFEQUFZQSxDQUFDMEIsSUFBSSxDQUFDO1FBQUVMLE9BQU87SUFBcUIsR0FBRztRQUFFb0QsUUFBUTtJQUFJO0FBQzFFO0FBRU8sZUFBZUU7SUFDcEIsT0FBTzNFLHFEQUFZQSxDQUFDMEIsSUFBSSxDQUFDO1FBQUVMLE9BQU87SUFBcUIsR0FBRztRQUFFb0QsUUFBUTtJQUFJO0FBQzFFO0FBRU8sZUFBZUc7SUFDcEIsT0FBTzVFLHFEQUFZQSxDQUFDMEIsSUFBSSxDQUFDO1FBQUVMLE9BQU87SUFBcUIsR0FBRztRQUFFb0QsUUFBUTtJQUFJO0FBQzFFIiwic291cmNlcyI6WyJEOlxcTmV3IGZvbGRlclxcdHdpbGlvX25ld1xcdHdpbGlvX2NoYXRcXGFwcFxcYXBpXFxiaXJkXFx3ZWJob29rXFxyb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xyXG5pbXBvcnQgeyBzZW5kQmlyZE1lc3NhZ2UsIHNlbmRCaXJkSW1hZ2VNZXNzYWdlLCB1cGxvYWRJbWFnZVRvQmlyZCB9IGZyb20gJ0AvbGliL2JpcmQtc2VydmljZSc7XHJcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcclxuXHJcbmV4cG9ydCBjb25zdCBkeW5hbWljID0gJ2ZvcmNlLWR5bmFtaWMnO1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGxvZyB0byBmaWxlXHJcbmZ1bmN0aW9uIGxvZ1RvRmlsZShtZXNzYWdlOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgbG9nRGlyID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICcuLicsICdsb2dzJyk7XHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMobG9nRGlyKSkge1xyXG4gICAgICBmcy5ta2RpclN5bmMobG9nRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGxvZ0ZpbGUgPSBwYXRoLmpvaW4obG9nRGlyLCAnd2ViaG9vay1kZWJ1Zy5sb2cnKTtcclxuICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGZzLmFwcGVuZEZpbGVTeW5jKGxvZ0ZpbGUsIGBbJHt0aW1lc3RhbXB9XSAke21lc3NhZ2V9XFxuYCk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB3cml0ZSB0byBsb2cgZmlsZTonLCBlcnJvcik7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDwn5+iIEJpcmQgV2ViaG9vayBlbmRwb2ludFxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGxvZ1RvRmlsZSgnPT09IE5FVyBXRUJIT09LIFJFUVVFU1QgPT09Jyk7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKTtcclxuICAgIGxvZ1RvRmlsZShgSW5jb21pbmcgQm9keTogJHtKU09OLnN0cmluZ2lmeShib2R5LCBudWxsLCAyKX1gKTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OpIEluY29taW5nIEJpcmQgZXZlbnQ6JywgSlNPTi5zdHJpbmdpZnkoYm9keSwgbnVsbCwgMikpO1xyXG5cclxuICAgIC8vIEhhbmRsZSBCaXJkJ3MgYWN0dWFsIHBheWxvYWQgZm9ybWF0XHJcbiAgICBjb25zdCBldmVudCA9IGJvZHkuZXZlbnQ7XHJcbiAgICBjb25zdCBwYXlsb2FkID0gYm9keS5wYXlsb2FkO1xyXG4gICAgXHJcbiAgICAvLyBFeHRyYWN0IGNvbnRhY3QgaW5mbyBmcm9tIHRoZSBhY3R1YWwgQmlyZCBmb3JtYXRcclxuICAgIGxldCBjb250YWN0ID0gbnVsbDtcclxuICAgIGxldCBwb3N0YmFja1BheWxvYWQgPSBudWxsO1xyXG4gICAgXHJcbiAgICBpZiAoZXZlbnQgPT09ICd3aGF0c2FwcC5pbmJvdW5kJyAmJiBwYXlsb2FkKSB7XHJcbiAgICAgIC8vIEdldCBjb250YWN0IGZyb20gc2VuZGVyXHJcbiAgICAgIGNvbnRhY3QgPSBwYXlsb2FkLnNlbmRlcj8uY29udGFjdD8uaWRlbnRpZmllclZhbHVlO1xyXG4gICAgICBcclxuICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFjdGlvbnMgd2l0aCBwb3N0YmFjayBpbiB0aGUgYm9keS50ZXh0LmFjdGlvbnNcclxuICAgICAgaWYgKHBheWxvYWQuYm9keT8udGV4dD8uYWN0aW9ucyAmJiBwYXlsb2FkLmJvZHkudGV4dC5hY3Rpb25zLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBjb25zdCBwb3N0YmFja0FjdGlvbiA9IHBheWxvYWQuYm9keS50ZXh0LmFjdGlvbnMuZmluZCgoYWN0aW9uOiBhbnkpID0+IGFjdGlvbi50eXBlID09PSAncG9zdGJhY2snKTtcclxuICAgICAgICBpZiAocG9zdGJhY2tBY3Rpb24pIHtcclxuICAgICAgICAgIHBvc3RiYWNrUGF5bG9hZCA9IHBvc3RiYWNrQWN0aW9uLnBvc3RiYWNrPy5wYXlsb2FkO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5SNIEV4dHJhY3RlZCBkYXRhOicsIHsgZXZlbnQsIGNvbnRhY3QsIHBvc3RiYWNrUGF5bG9hZCB9KTtcclxuICAgIGxvZ1RvRmlsZShgRXh0cmFjdGVkIC0gRXZlbnQ6ICR7ZXZlbnR9LCBDb250YWN0OiAke2NvbnRhY3R9LCBQb3N0YmFjazogJHtwb3N0YmFja1BheWxvYWR9YCk7XHJcblxyXG4gICAgLy8gSGFuZGxlIGJ1dHRvbiBjbGlja3MgKHBvc3RiYWNrcykgYW5kIHRleHQgbWVzc2FnZXNcclxuICAgIGlmIChldmVudCA9PT0gJ3doYXRzYXBwLmluYm91bmQnICYmIGNvbnRhY3QpIHtcclxuICAgICAgbG9nVG9GaWxlKCdQcm9jZXNzaW5nIHdoYXRzYXBwLmluYm91bmQgZXZlbnQnKTtcclxuICAgICAgY29uc29sZS5sb2coJ/Cfjq8gUHJvY2Vzc2luZyB3ZWJob29rIC0gZXZlbnQ6JywgZXZlbnQsICdjb250YWN0OicsIGNvbnRhY3QsICdwb3N0YmFja1BheWxvYWQ6JywgcG9zdGJhY2tQYXlsb2FkKTtcclxuICAgICAgbGV0IHJlcGx5VGV4dCA9ICcnO1xyXG4gICAgICBsZXQgc2hvdWxkQ29udmVydFBkZiA9IGZhbHNlO1xyXG5cclxuICAgICAgLy8gSGFuZGxlIGJ1dHRvbiBjbGlja3MgKHBvc3RiYWNrcylcclxuICAgICAgaWYgKHBvc3RiYWNrUGF5bG9hZCkge1xyXG4gICAgICAgIGxvZ1RvRmlsZShgUG9zdGJhY2sgcGF5bG9hZCBmb3VuZDogJHtwb3N0YmFja1BheWxvYWR9YCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfjq8gUG9zdGJhY2sgcGF5bG9hZCBmb3VuZDonLCBwb3N0YmFja1BheWxvYWQpO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXlsb2FkID0gcG9zdGJhY2tQYXlsb2FkLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGxvZ1RvRmlsZShgTm9ybWFsaXplZCBwYXlsb2FkOiAke25vcm1hbGl6ZWRQYXlsb2FkfWApO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDaGVja2luZyBwb3N0YmFja1BheWxvYWQ6JywgcG9zdGJhY2tQYXlsb2FkLCAnbm9ybWFsaXplZDonLCBub3JtYWxpemVkUGF5bG9hZCk7XHJcblxyXG4gICAgICAgIGlmIChub3JtYWxpemVkUGF5bG9hZCA9PT0gJ3BheV9pbnN0YXBheScpIHtcclxuICAgICAgICAgIGxvZ1RvRmlsZSgnTWF0Y2hlZDogcGF5X2luc3RhcGF5Jyk7XHJcbiAgICAgICAgICByZXBseVRleHQgPSAn2K/ZhyDYsdmC2YUg2KfZhtiz2KrYp9io2KfZiiAwMTAwNTY0ODk5NyDYrdmI2YQg2LnZhNmK2Ycg2YjYp9io2LnYqiDYtdmI2LHYqSDYp9mE2KrYrdmI2YrZhCDYudmE2Yog2LHZgtmFIDAxMTIwMDM1MzAwJztcclxuICAgICAgICB9IGVsc2UgaWYgKG5vcm1hbGl6ZWRQYXlsb2FkID09PSAncGF5X3ZjYXNoJykge1xyXG4gICAgICAgICAgbG9nVG9GaWxlKCdNYXRjaGVkOiBwYXlfdmNhc2gnKTtcclxuICAgICAgICAgIHJlcGx5VGV4dCA9ICfYr9mHINix2YLZhSDZgdmI2K/Yp9mB2YjZhiDZg9in2LQgMDExMjAwMzUzMDAg2K3ZiNmEINi52YTZitmHINmI2KfYqNi52Kog2LXZiNix2Kkg2KfZhNiq2K3ZiNmK2YQg2LnYtNin2YYg2YbYs9is2YQg2KfZhNiq2K3ZiNmK2YQnO1xyXG4gICAgICAgIH0gZWxzZSBpZiAobm9ybWFsaXplZFBheWxvYWQgPT09ICdpbWFnZScpIHtcclxuICAgICAgICAgIGxvZ1RvRmlsZSgnTWF0Y2hlZDogaW1hZ2UgLSBTZXR0aW5nIHVwIFBERiBjb252ZXJzaW9uJyk7XHJcbiAgICAgICAgICBzaG91bGRDb252ZXJ0UGRmID0gdHJ1ZTtcclxuICAgICAgICAgIHJlcGx5VGV4dCA9ICfYrNin2LHZiiDYqtit2YjZitmEINin2YTYqtmC2LHZitixINil2YTZiSDYtdmI2LEg2YjYpdix2LPYp9mE2YfYpyDZhNmDLi4uJztcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn46vIEltYWdlIHBvc3RiYWNrIGRldGVjdGVkIC0gc2hvdWxkQ29udmVydFBkZjonLCBzaG91bGRDb252ZXJ0UGRmLCAncmVwbHlUZXh0OicsIHJlcGx5VGV4dCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGxvZ1RvRmlsZShgVW5oYW5kbGVkIHBvc3RiYWNrIHBheWxvYWQ6ICR7cG9zdGJhY2tQYXlsb2FkfWApO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1VuaGFuZGxlZCBwb3N0YmFjayBwYXlsb2FkOicsIHBvc3RiYWNrUGF5bG9hZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIEhhbmRsZSB0ZXh0IG1lc3NhZ2VzIGNvbnRhaW5pbmcgXCJpbWFnZVwiXHJcbiAgICAgIGVsc2UgaWYgKHBheWxvYWQuYm9keT8udGV4dD8uYm9keSkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gcGF5bG9hZC5ib2R5LnRleHQuYm9keS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlVGV4dC5pbmNsdWRlcygnaW1hZ2UnKSkge1xyXG4gICAgICAgICAgc2hvdWxkQ29udmVydFBkZiA9IHRydWU7XHJcbiAgICAgICAgICByZXBseVRleHQgPSAn2KzYp9ix2Yog2KrYrdmI2YrZhCDYp9mE2KrZgtix2YrYsSDYpdmE2Ykg2LXZiNixINmI2KXYsdiz2KfZhNmH2Kcg2YTZgy4uLic7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBTZW5kIHRleHQgcmVwbHkgaWYgd2UgaGF2ZSBvbmVcclxuICAgICAgaWYgKHJlcGx5VGV4dCkge1xyXG4gICAgICAgIGxvZ1RvRmlsZShgU2VuZGluZyB0ZXh0IHJlcGx5IHRvICR7Y29udGFjdH06ICR7cmVwbHlUZXh0fWApO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZW5kQmlyZE1lc3NhZ2UoY29udGFjdCwgcmVwbHlUZXh0KTtcclxuICAgICAgICAgIGxvZ1RvRmlsZShgU2VuZCByZXN1bHQ6ICR7SlNPTi5zdHJpbmdpZnkocmVzdWx0KX1gKTtcclxuICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFJlcGx5IHNlbnQgc3VjY2Vzc2Z1bGx5IHRvJywgY29udGFjdCk7XHJcbiAgICAgICAgICAgIGxvZ1RvRmlsZShg4pyFIFJlcGx5IHNlbnQgc3VjY2Vzc2Z1bGx5YCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFJlcGx5IGZhaWxlZDonLCByZXN1bHQuZXJyb3IpO1xyXG4gICAgICAgICAgICBsb2dUb0ZpbGUoYOKaoO+4jyBSZXBseSBmYWlsZWQ6ICR7cmVzdWx0LmVycm9yfWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+TnSBXb3VsZCBoYXZlIHNlbnQgdG8nLCBjb250YWN0LCAnOicsIHJlcGx5VGV4dCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIGxvZ1RvRmlsZShg4pqg77iPIEV4Y2VwdGlvbiBkdXJpbmcgc2VuZDogJHtlcnJvcn1gKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8gQmlyZCBtZXNzYWdlIHNlbmQgZmFpbGVkOicsIGVycm9yKTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5OdIFdvdWxkIGhhdmUgc2VudCB0bycsIGNvbnRhY3QsICc6JywgcmVwbHlUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIENvbnZlcnQgUERGIHRvIGltYWdlcyBpZiByZXF1ZXN0ZWRcclxuICAgICAgaWYgKHNob3VsZENvbnZlcnRQZGYpIHtcclxuICAgICAgICBsb2dUb0ZpbGUoYFN0YXJ0aW5nIFBERiBjb252ZXJzaW9uIGZvciAke2NvbnRhY3R9YCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn5SEIENvbnZlcnRpbmcgUERGIHRvIGltYWdlcyBmb3InLCBjb250YWN0KTtcclxuICAgICAgICAgIGNvbnN0IHBkZlNlcnZpY2VVcmwgPSAnaHR0cDovL2xvY2FsaG9zdDozMDAyL3BkZi10by1pbWFnZSc7XHJcbiAgICAgICAgICBsb2dUb0ZpbGUoYENhbGxpbmcgUERGIHNlcnZpY2UgYXQ6ICR7cGRmU2VydmljZVVybH1gKTtcclxuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocGRmU2VydmljZVVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICBwYXRpZW50X251bWJlcjogY29udGFjdCxcclxuICAgICAgICAgICAgICBtZXNzYWdlOiBwYXlsb2FkLmJvZHk/LnRleHQ/LmJvZHkgfHwgJ2ltYWdlJ1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgbG9nVG9GaWxlKGBQREYgY29udmVyc2lvbiByZXNwb25zZTogJHtKU09OLnN0cmluZ2lmeShyZXN1bHQpfWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIFBERiBjb252ZXJzaW9uIHN1Y2Nlc3NmdWw6JywgcmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gU2VuZCBlYWNoIGNvbnZlcnRlZCBpbWFnZSB2aWEgV2hhdHNBcHBcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5pbWFnZXMgJiYgcmVzdWx0LmltYWdlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgbG9nVG9GaWxlKGBGb3VuZCAke3Jlc3VsdC5pbWFnZXMubGVuZ3RofSBpbWFnZXMgdG8gc2VuZGApO1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5OkIFNlbmRpbmcgJHtyZXN1bHQuaW1hZ2VzLmxlbmd0aH0gaW1hZ2VzIHZpYSBXaGF0c0FwcGApO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgaW1hZ2VOYW1lIG9mIHJlc3VsdC5pbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgZnVsbCBwYXRoIHRvIHRoZSBpbWFnZSBmaWxlXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlUGF0aCA9IGBEOlxcXFxSZXN1bHRzXFxcXCR7cmVzdWx0LmZvbGRlcn1cXFxcaW1hZ2VzXFxcXCR7aW1hZ2VOYW1lfWA7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5O4IFVwbG9hZGluZyBpbWFnZTogJHtpbWFnZVBhdGh9IHRvIEJpcmRgKTtcclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC8vIFVwbG9hZCBpbWFnZSB0byBCaXJkIGFuZCBnZXQgbWVkaWEgVVJMXHJcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lZGlhVXJsID0gYXdhaXQgdXBsb2FkSW1hZ2VUb0JpcmQoaW1hZ2VQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coYPCfk6QgR290IG1lZGlhIFVSTCBmcm9tIEJpcmQ6ICR7bWVkaWFVcmx9YCk7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAvLyBTZW5kIHRoZSBpbWFnZSB2aWEgV2hhdHNBcHAgdXNpbmcgdGhlIG1lZGlhIFVSTFxyXG4gICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVJlc3VsdCA9IGF3YWl0IHNlbmRCaXJkSW1hZ2VNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhY3QsIFxyXG4gICAgICAgICAgICAgICAgICAgIG1lZGlhVXJsLCBcclxuICAgICAgICAgICAgICAgICAgICBg2KrZgtix2YrYsSDYp9mE2YXYudmF2YQgLSDYtdmB2K3YqSAke3Jlc3VsdC5pbWFnZXMuaW5kZXhPZihpbWFnZU5hbWUpICsgMX1gXHJcbiAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBpZiAoaW1hZ2VSZXN1bHQuc3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgSW1hZ2Ugc2VudCBzdWNjZXNzZnVsbHk6ICR7aW1hZ2VOYW1lfWApO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDimqDvuI8gRmFpbGVkIHRvIHNlbmQgaW1hZ2UgJHtpbWFnZU5hbWV9OmAsIGltYWdlUmVzdWx0LmVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGltYWdlRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBGYWlsZWQgdG8gc2VuZCBpbWFnZTonLCBpbWFnZUVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxvZ1RvRmlsZShg4pqg77iPIFBERiBjb252ZXJzaW9uIGZhaWxlZDogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFBERiBjb252ZXJzaW9uIGZhaWxlZDonLCByZXNwb25zZS5zdGF0dXNUZXh0KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgbG9nVG9GaWxlKGDimqDvuI8gUERGIGNvbnZlcnNpb24gZXJyb3I6ICR7ZXJyb3J9YCk7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pqg77iPIFBERiBjb252ZXJzaW9uIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmICghcmVwbHlUZXh0ICYmICFzaG91bGRDb252ZXJ0UGRmKSB7XHJcbiAgICAgICAgbG9nVG9GaWxlKCdObyBhY3Rpb24gY29uZmlndXJlZCBmb3IgdGhpcyBtZXNzYWdlJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ+KEue+4jyBObyBhY3Rpb24gY29uZmlndXJlZCBmb3IgdGhpcyBtZXNzYWdlJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxvZ1RvRmlsZShgRXZlbnQgbm90IGhhbmRsZWQgLSBFdmVudDogJHtldmVudH0sIGhhc0NvbnRhY3Q6ICR7ISFjb250YWN0fSwgaGFzUG9zdGJhY2s6ICR7ISFwb3N0YmFja1BheWxvYWR9YCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfihLnvuI8gRXZlbnQgbm90IGhhbmRsZWQ6JywgeyBldmVudCwgaGFzQ29udGFjdDogISFjb250YWN0LCBoYXNQb3N0YmFjazogISFwb3N0YmFja1BheWxvYWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbG9nVG9GaWxlKCc9PT0gV0VCSE9PSyBSRVFVRVNUIENPTVBMRVRFRCA9PT1cXG4nKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCaXJkIHdlYmhvb2sgZXJyb3I6JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIHN0YWNrOicsIGVyci5zdGFjayk7XHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgIHsgZXJyb3I6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH0sXHJcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEhhbmRsZSBvdGhlciBIVFRQIG1ldGhvZHNcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVCgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSwgeyBzdGF0dXM6IDQwNSB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVCgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSwgeyBzdGF0dXM6IDQwNSB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIERFTEVURSgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ01ldGhvZCBOb3QgQWxsb3dlZCcgfSwgeyBzdGF0dXM6IDQwNSB9KTtcclxufVxyXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwic2VuZEJpcmRNZXNzYWdlIiwic2VuZEJpcmRJbWFnZU1lc3NhZ2UiLCJ1cGxvYWRJbWFnZVRvQmlyZCIsImZzIiwicGF0aCIsImR5bmFtaWMiLCJsb2dUb0ZpbGUiLCJtZXNzYWdlIiwibG9nRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibG9nRmlsZSIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFwcGVuZEZpbGVTeW5jIiwiZXJyb3IiLCJjb25zb2xlIiwiUE9TVCIsInJlcSIsImJvZHkiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsImxvZyIsImV2ZW50IiwicGF5bG9hZCIsImNvbnRhY3QiLCJwb3N0YmFja1BheWxvYWQiLCJzZW5kZXIiLCJpZGVudGlmaWVyVmFsdWUiLCJ0ZXh0IiwiYWN0aW9ucyIsImxlbmd0aCIsInBvc3RiYWNrQWN0aW9uIiwiZmluZCIsImFjdGlvbiIsInR5cGUiLCJwb3N0YmFjayIsInJlcGx5VGV4dCIsInNob3VsZENvbnZlcnRQZGYiLCJub3JtYWxpemVkUGF5bG9hZCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsIm1lc3NhZ2VUZXh0IiwiaW5jbHVkZXMiLCJyZXN1bHQiLCJzdWNjZXNzIiwicGRmU2VydmljZVVybCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwicGF0aWVudF9udW1iZXIiLCJvayIsImltYWdlcyIsImltYWdlTmFtZSIsImltYWdlUGF0aCIsImZvbGRlciIsIm1lZGlhVXJsIiwiaW1hZ2VSZXN1bHQiLCJpbmRleE9mIiwiaW1hZ2VFcnJvciIsInN0YXR1c1RleHQiLCJoYXNDb250YWN0IiwiaGFzUG9zdGJhY2siLCJlcnIiLCJzdGFjayIsInN0YXR1cyIsIkdFVCIsIlBVVCIsIkRFTEVURSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/bird/webhook/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/bird-service.ts":
/*!*****************************!*\
  !*** ./lib/bird-service.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sendBirdImageMessage: () => (/* binding */ sendBirdImageMessage),\n/* harmony export */   sendBirdMessage: () => (/* binding */ sendBirdMessage),\n/* harmony export */   sendBirdTemplateMessage: () => (/* binding */ sendBirdTemplateMessage),\n/* harmony export */   testBirdConnection: () => (/* binding */ testBirdConnection),\n/* harmony export */   uploadImageToBird: () => (/* binding */ uploadImageToBird),\n/* harmony export */   validateBirdConfig: () => (/* binding */ validateBirdConfig)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"(rsc)/./node_modules/axios/lib/axios.js\");\n\n// üïäÔ∏è Bird API service for sending WhatsApp messages\nasync function sendBirdMessage(to, text) {\n    const apiKey = process.env.BIRD_API_KEY;\n    if (!apiKey) {\n        throw new Error('BIRD_API_KEY is not configured in environment variables');\n    }\n    try {\n        console.log('üïäÔ∏è Sending Bird message:', {\n            to,\n            text: text.substring(0, 50) + '...'\n        });\n        // Try the template API approach first (using workspace/channel structure)\n        const workspaceId = '2d7a1e03-25e4-401e-bf1e-0ace545673d7';\n        const channelId = '8e046034-bca7-5124-89d0-1a64c1cbe819';\n        const payload = {\n            receiver: {\n                contacts: [\n                    {\n                        identifierValue: to,\n                        identifierKey: \"phonenumber\"\n                    }\n                ]\n            },\n            body: {\n                type: \"text\",\n                text: {\n                    text: text\n                }\n            }\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`https://api.bird.com/workspaces/${workspaceId}/channels/${channelId}/messages`, payload, {\n            headers: {\n                Authorization: `AccessKey ${apiKey}`,\n                'Content-Type': 'application/json'\n            },\n            timeout: 10000\n        });\n        console.log('‚úÖ Bird reply sent successfully:', {\n            messageId: response.data.id,\n            status: response.data.status,\n            to: to\n        });\n        return {\n            success: true,\n            messageId: response.data.id,\n            status: response.data.status,\n            data: response.data\n        };\n    } catch (error) {\n        console.error('‚ùå Bird send failed:', {\n            error: error.message,\n            response: error.response?.data,\n            status: error.response?.status\n        });\n        // Log the error but don't throw - let the webhook continue\n        console.log('‚ö†Ô∏è Bird message send failed, but webhook will continue');\n        return {\n            success: false,\n            error: error.response?.data?.message || error.message\n        };\n    }\n}\n// üïäÔ∏è Helper to validate Bird configuration\nfunction validateBirdConfig() {\n    const apiKey = process.env.BIRD_API_KEY;\n    const whatsappNumber = process.env.BIRD_WHATSAPP_NUMBER;\n    if (!apiKey) {\n        throw new Error('BIRD_API_KEY is required in environment variables');\n    }\n    if (!whatsappNumber) {\n        console.warn('‚ö†Ô∏è BIRD_WHATSAPP_NUMBER not set, using default: +201100414204');\n    }\n    return {\n        apiKey: !!apiKey,\n        whatsappNumber: whatsappNumber || '+201100414204'\n    };\n}\n// üïäÔ∏è Send template-based message via Bird API\nasync function sendBirdTemplateMessage(workspaceId, channelId, projectId, templateVersion, phoneNumber, parameters, locale = 'en') {\n    const apiKey = process.env.BIRD_API_KEY;\n    if (!apiKey) {\n        throw new Error('BIRD_API_KEY is not configured in environment variables');\n    }\n    try {\n        console.log('üïäÔ∏è Sending Bird template message:', {\n            workspaceId,\n            channelId,\n            projectId,\n            phoneNumber,\n            parametersCount: parameters.length\n        });\n        const payload = {\n            receiver: {\n                contacts: [\n                    {\n                        identifierValue: phoneNumber,\n                        identifierKey: \"phonenumber\"\n                    }\n                ]\n            },\n            template: {\n                projectId,\n                version: templateVersion,\n                locale,\n                parameters\n            }\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`https://api.bird.com/workspaces/${workspaceId}/channels/${channelId}/messages`, payload, {\n            headers: {\n                Authorization: `AccessKey ${apiKey}`,\n                'Content-Type': 'application/json'\n            },\n            timeout: 30000\n        });\n        console.log('‚úÖ Bird template message sent successfully:', {\n            messageId: response.data.id,\n            status: response.data.status,\n            to: phoneNumber\n        });\n        return {\n            success: true,\n            messageId: response.data.id,\n            status: response.data.status,\n            data: response.data\n        };\n    } catch (error) {\n        console.error('‚ùå Bird template send failed:', {\n            error: error.message,\n            response: error.response?.data,\n            status: error.response?.status\n        });\n        throw new Error(`Failed to send Bird template message: ${error.response?.data?.message || error.message}`);\n    }\n}\n// üïäÔ∏è Upload image to Bird and get media URL\nasync function uploadImageToBird(imagePath) {\n    const apiKey = process.env.BIRD_API_KEY;\n    if (!apiKey) {\n        throw new Error('BIRD_API_KEY is not configured in environment variables');\n    }\n    try {\n        console.log('üïäÔ∏è Uploading image to Bird:', imagePath);\n        const workspaceId = '2d7a1e03-25e4-401e-bf1e-0ace545673d7';\n        const channelId = '8e046034-bca7-5124-89d0-1a64c1cbe819';\n        // Step 1: Get presigned upload URL from Bird\n        const presignResponse = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`https://api.bird.com/workspaces/${workspaceId}/channels/${channelId}/presigned-upload`, {\n            contentType: 'image/jpeg'\n        }, {\n            headers: {\n                'Authorization': `AccessKey ${apiKey}`,\n                'Content-Type': 'application/json'\n            }\n        });\n        const { uploadUrl, mediaUrl } = presignResponse.data;\n        console.log('üì§ Got presigned upload URL from Bird');\n        // Step 2: Upload the image file\n        const FormData = __webpack_require__(/*! form-data */ \"(rsc)/./node_modules/form-data/lib/form_data.js\");\n        const fs = __webpack_require__(/*! fs */ \"fs\");\n        const formData = new FormData();\n        // Add all form fields from uploadFormData\n        Object.entries(presignResponse.data.uploadFormData).forEach(([key, value])=>{\n            formData.append(key, value);\n        });\n        // Add file\n        const fileStream = fs.createReadStream(imagePath);\n        formData.append('file', fileStream, {\n            filename: (__webpack_require__(/*! path */ \"path\").basename)(imagePath),\n            contentType: 'image/jpeg'\n        });\n        await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(uploadUrl, formData, {\n            headers: {\n                ...formData.getHeaders()\n            },\n            timeout: 60000\n        });\n        console.log('‚úÖ Image uploaded to Bird successfully');\n        return mediaUrl;\n    } catch (error) {\n        console.error('‚ùå Bird image upload failed:', {\n            error: error.message,\n            response: error.response?.data,\n            status: error.response?.status\n        });\n        throw new Error(`Failed to upload image to Bird: ${error.response?.data?.message || error.message}`);\n    }\n}\n// üïäÔ∏è Send image message via Bird API using media URL\nasync function sendBirdImageMessage(to, mediaUrl, caption) {\n    const apiKey = process.env.BIRD_API_KEY;\n    if (!apiKey) {\n        throw new Error('BIRD_API_KEY is not configured in environment variables');\n    }\n    try {\n        console.log('üïäÔ∏è Sending Bird image message:', {\n            to,\n            mediaUrl,\n            caption\n        });\n        const workspaceId = '2d7a1e03-25e4-401e-bf1e-0ace545673d7';\n        const channelId = '8e046034-bca7-5124-89d0-1a64c1cbe819';\n        const payload = {\n            receiver: {\n                contacts: [\n                    {\n                        identifierValue: to,\n                        identifierKey: \"phonenumber\"\n                    }\n                ]\n            },\n            body: {\n                type: \"image\",\n                image: {\n                    images: [\n                        {\n                            altText: caption || \"ÿ™ŸÇÿ±Ÿäÿ± ÿßŸÑŸÖÿÆÿ™ÿ®ÿ±\",\n                            mediaUrl: mediaUrl\n                        }\n                    ]\n                }\n            }\n        };\n        const response = await axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].post(`https://api.bird.com/workspaces/${workspaceId}/channels/${channelId}/messages`, payload, {\n            headers: {\n                Authorization: `AccessKey ${apiKey}`,\n                'Content-Type': 'application/json'\n            },\n            timeout: 30000\n        });\n        console.log('‚úÖ Bird image sent successfully:', {\n            messageId: response.data.id,\n            status: response.data.status,\n            to: to\n        });\n        return {\n            success: true,\n            messageId: response.data.id,\n            status: response.data.status,\n            data: response.data\n        };\n    } catch (error) {\n        console.error('‚ùå Bird image send failed:', {\n            error: error.message,\n            response: error.response?.data,\n            status: error.response?.status\n        });\n        return {\n            success: false,\n            error: error.response?.data?.message || error.message\n        };\n    }\n}\n// üïäÔ∏è Test Bird API connection\nasync function testBirdConnection() {\n    try {\n        const config = validateBirdConfig();\n        console.log('üïäÔ∏è Bird configuration validated:', {\n            hasApiKey: config.apiKey,\n            whatsappNumber: config.whatsappNumber\n        });\n        // You could add a test API call here if Bird provides a test endpoint\n        return {\n            success: true,\n            message: 'Bird configuration is valid',\n            config\n        };\n    } catch (error) {\n        console.error('‚ùå Bird configuration test failed:', error.message);\n        return {\n            success: false,\n            error: error.message\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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aXJkLXNlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcclxuXHJcbi8vIPCflYrvuI8gQmlyZCBBUEkgc2VydmljZSBmb3Igc2VuZGluZyBXaGF0c0FwcCBtZXNzYWdlc1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VuZEJpcmRNZXNzYWdlKHRvOiBzdHJpbmcsIHRleHQ6IHN0cmluZykge1xyXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkJJUkRfQVBJX0tFWTtcclxuXHJcbiAgaWYgKCFhcGlLZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQklSRF9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkIGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5WK77iPIFNlbmRpbmcgQmlyZCBtZXNzYWdlOicsIHsgdG8sIHRleHQ6IHRleHQuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nIH0pO1xyXG5cclxuICAgIC8vIFRyeSB0aGUgdGVtcGxhdGUgQVBJIGFwcHJvYWNoIGZpcnN0ICh1c2luZyB3b3Jrc3BhY2UvY2hhbm5lbCBzdHJ1Y3R1cmUpXHJcbiAgICBjb25zdCB3b3Jrc3BhY2VJZCA9ICcyZDdhMWUwMy0yNWU0LTQwMWUtYmYxZS0wYWNlNTQ1NjczZDcnO1xyXG4gICAgY29uc3QgY2hhbm5lbElkID0gJzhlMDQ2MDM0LWJjYTctNTEyNC04OWQwLTFhNjRjMWNiZTgxOSc7XHJcblxyXG4gICAgY29uc3QgcGF5bG9hZCA9IHtcclxuICAgICAgcmVjZWl2ZXI6IHtcclxuICAgICAgICBjb250YWN0czogW1xyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBpZGVudGlmaWVyVmFsdWU6IHRvLFxyXG4gICAgICAgICAgICBpZGVudGlmaWVyS2V5OiBcInBob25lbnVtYmVyXCJcclxuICAgICAgICAgIH1cclxuICAgICAgICBdXHJcbiAgICAgIH0sXHJcbiAgICAgIGJvZHk6IHtcclxuICAgICAgICB0eXBlOiBcInRleHRcIixcclxuICAgICAgICB0ZXh0OiB7XHJcbiAgICAgICAgICB0ZXh0OiB0ZXh0XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChcclxuICAgICAgYGh0dHBzOi8vYXBpLmJpcmQuY29tL3dvcmtzcGFjZXMvJHt3b3Jrc3BhY2VJZH0vY2hhbm5lbHMvJHtjaGFubmVsSWR9L21lc3NhZ2VzYCxcclxuICAgICAgcGF5bG9hZCxcclxuICAgICAge1xyXG4gICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBBY2Nlc3NLZXkgJHthcGlLZXl9YCxcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aW1lb3V0OiAxMDAwMCwgLy8gMTAgc2Vjb25kIHRpbWVvdXRcclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIEJpcmQgcmVwbHkgc2VudCBzdWNjZXNzZnVsbHk6Jywge1xyXG4gICAgICBtZXNzYWdlSWQ6IHJlc3BvbnNlLmRhdGEuaWQsXHJcbiAgICAgIHN0YXR1czogcmVzcG9uc2UuZGF0YS5zdGF0dXMsXHJcbiAgICAgIHRvOiB0b1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZUlkOiByZXNwb25zZS5kYXRhLmlkLFxyXG4gICAgICBzdGF0dXM6IHJlc3BvbnNlLmRhdGEuc3RhdHVzLFxyXG4gICAgICBkYXRhOiByZXNwb25zZS5kYXRhXHJcbiAgICB9O1xyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCaXJkIHNlbmQgZmFpbGVkOicsIHtcclxuICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgIHJlc3BvbnNlOiBlcnJvci5yZXNwb25zZT8uZGF0YSxcclxuICAgICAgc3RhdHVzOiBlcnJvci5yZXNwb25zZT8uc3RhdHVzXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBMb2cgdGhlIGVycm9yIGJ1dCBkb24ndCB0aHJvdyAtIGxldCB0aGUgd2ViaG9vayBjb250aW51ZVxyXG4gICAgY29uc29sZS5sb2coJ+KaoO+4jyBCaXJkIG1lc3NhZ2Ugc2VuZCBmYWlsZWQsIGJ1dCB3ZWJob29rIHdpbGwgY29udGludWUnKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIPCflYrvuI8gSGVscGVyIHRvIHZhbGlkYXRlIEJpcmQgY29uZmlndXJhdGlvblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVCaXJkQ29uZmlnKCkge1xyXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkJJUkRfQVBJX0tFWTtcclxuICBjb25zdCB3aGF0c2FwcE51bWJlciA9IHByb2Nlc3MuZW52LkJJUkRfV0hBVFNBUFBfTlVNQkVSO1xyXG5cclxuICBpZiAoIWFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdCSVJEX0FQSV9LRVkgaXMgcmVxdWlyZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgfVxyXG5cclxuICBpZiAoIXdoYXRzYXBwTnVtYmVyKSB7XHJcbiAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBCSVJEX1dIQVRTQVBQX05VTUJFUiBub3Qgc2V0LCB1c2luZyBkZWZhdWx0OiArMjAxMTAwNDE0MjA0Jyk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4ge1xyXG4gICAgYXBpS2V5OiAhIWFwaUtleSxcclxuICAgIHdoYXRzYXBwTnVtYmVyOiB3aGF0c2FwcE51bWJlciB8fCAnKzIwMTEwMDQxNDIwNCdcclxuICB9O1xyXG59XHJcblxyXG4vLyDwn5WK77iPIFNlbmQgdGVtcGxhdGUtYmFzZWQgbWVzc2FnZSB2aWEgQmlyZCBBUElcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRCaXJkVGVtcGxhdGVNZXNzYWdlKFxyXG4gIHdvcmtzcGFjZUlkOiBzdHJpbmcsXHJcbiAgY2hhbm5lbElkOiBzdHJpbmcsXHJcbiAgcHJvamVjdElkOiBzdHJpbmcsXHJcbiAgdGVtcGxhdGVWZXJzaW9uOiBzdHJpbmcsXHJcbiAgcGhvbmVOdW1iZXI6IHN0cmluZyxcclxuICBwYXJhbWV0ZXJzOiBBcnJheTx7IHR5cGU6IHN0cmluZzsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXHJcbiAgbG9jYWxlOiBzdHJpbmcgPSAnZW4nXHJcbikge1xyXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52LkJJUkRfQVBJX0tFWTtcclxuXHJcbiAgaWYgKCFhcGlLZXkpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignQklSRF9BUElfS0VZIGlzIG5vdCBjb25maWd1cmVkIGluIGVudmlyb25tZW50IHZhcmlhYmxlcycpO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCfwn5WK77iPIFNlbmRpbmcgQmlyZCB0ZW1wbGF0ZSBtZXNzYWdlOicsIHsgXHJcbiAgICAgIHdvcmtzcGFjZUlkLCBcclxuICAgICAgY2hhbm5lbElkLCBcclxuICAgICAgcHJvamVjdElkLCBcclxuICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgIHBhcmFtZXRlcnNDb3VudDogcGFyYW1ldGVycy5sZW5ndGggXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBwYXlsb2FkID0ge1xyXG4gICAgICByZWNlaXZlcjoge1xyXG4gICAgICAgIGNvbnRhY3RzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGlkZW50aWZpZXJWYWx1ZTogcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIGlkZW50aWZpZXJLZXk6IFwicGhvbmVudW1iZXJcIlxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIF1cclxuICAgICAgfSxcclxuICAgICAgdGVtcGxhdGU6IHtcclxuICAgICAgICBwcm9qZWN0SWQsXHJcbiAgICAgICAgdmVyc2lvbjogdGVtcGxhdGVWZXJzaW9uLFxyXG4gICAgICAgIGxvY2FsZSxcclxuICAgICAgICBwYXJhbWV0ZXJzXHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgICBgaHR0cHM6Ly9hcGkuYmlyZC5jb20vd29ya3NwYWNlcy8ke3dvcmtzcGFjZUlkfS9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXNgLFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEFjY2Vzc0tleSAke2FwaUtleX1gLFxyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVvdXQ6IDMwMDAwLCAvLyAzMCBzZWNvbmQgdGltZW91dFxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUgQmlyZCB0ZW1wbGF0ZSBtZXNzYWdlIHNlbnQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgbWVzc2FnZUlkOiByZXNwb25zZS5kYXRhLmlkLFxyXG4gICAgICBzdGF0dXM6IHJlc3BvbnNlLmRhdGEuc3RhdHVzLFxyXG4gICAgICB0bzogcGhvbmVOdW1iZXJcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2VJZDogcmVzcG9uc2UuZGF0YS5pZCxcclxuICAgICAgc3RhdHVzOiByZXNwb25zZS5kYXRhLnN0YXR1cyxcclxuICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YVxyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQmlyZCB0ZW1wbGF0ZSBzZW5kIGZhaWxlZDonLCB7XHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICByZXNwb25zZTogZXJyb3IucmVzcG9uc2U/LmRhdGEsXHJcbiAgICAgIHN0YXR1czogZXJyb3IucmVzcG9uc2U/LnN0YXR1c1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gc2VuZCBCaXJkIHRlbXBsYXRlIG1lc3NhZ2U6ICR7ZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZX1gKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIPCflYrvuI8gVXBsb2FkIGltYWdlIHRvIEJpcmQgYW5kIGdldCBtZWRpYSBVUkxcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwbG9hZEltYWdlVG9CaXJkKGltYWdlUGF0aDogc3RyaW5nKSB7XHJcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQklSRF9BUElfS0VZO1xyXG5cclxuICBpZiAoIWFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdCSVJEX0FQSV9LRVkgaXMgbm90IGNvbmZpZ3VyZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflYrvuI8gVXBsb2FkaW5nIGltYWdlIHRvIEJpcmQ6JywgaW1hZ2VQYXRoKTtcclxuXHJcbiAgICBjb25zdCB3b3Jrc3BhY2VJZCA9ICcyZDdhMWUwMy0yNWU0LTQwMWUtYmYxZS0wYWNlNTQ1NjczZDcnO1xyXG4gICAgY29uc3QgY2hhbm5lbElkID0gJzhlMDQ2MDM0LWJjYTctNTEyNC04OWQwLTFhNjRjMWNiZTgxOSc7XHJcblxyXG4gICAgLy8gU3RlcCAxOiBHZXQgcHJlc2lnbmVkIHVwbG9hZCBVUkwgZnJvbSBCaXJkXHJcbiAgICBjb25zdCBwcmVzaWduUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgICBgaHR0cHM6Ly9hcGkuYmlyZC5jb20vd29ya3NwYWNlcy8ke3dvcmtzcGFjZUlkfS9jaGFubmVscy8ke2NoYW5uZWxJZH0vcHJlc2lnbmVkLXVwbG9hZGAsXHJcbiAgICAgIHtcclxuICAgICAgICBjb250ZW50VHlwZTogJ2ltYWdlL2pwZWcnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBBY2Nlc3NLZXkgJHthcGlLZXl9YCxcclxuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgeyB1cGxvYWRVcmwsIG1lZGlhVXJsIH0gPSBwcmVzaWduUmVzcG9uc2UuZGF0YTtcclxuICAgIGNvbnNvbGUubG9nKCfwn5OkIEdvdCBwcmVzaWduZWQgdXBsb2FkIFVSTCBmcm9tIEJpcmQnKTtcclxuXHJcbiAgICAvLyBTdGVwIDI6IFVwbG9hZCB0aGUgaW1hZ2UgZmlsZVxyXG4gICAgY29uc3QgRm9ybURhdGEgPSByZXF1aXJlKCdmb3JtLWRhdGEnKTtcclxuICAgIGNvbnN0IGZzID0gcmVxdWlyZSgnZnMnKTtcclxuICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcblxyXG4gICAgLy8gQWRkIGFsbCBmb3JtIGZpZWxkcyBmcm9tIHVwbG9hZEZvcm1EYXRhXHJcbiAgICBPYmplY3QuZW50cmllcyhwcmVzaWduUmVzcG9uc2UuZGF0YS51cGxvYWRGb3JtRGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XHJcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChrZXksIHZhbHVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEFkZCBmaWxlXHJcbiAgICBjb25zdCBmaWxlU3RyZWFtID0gZnMuY3JlYXRlUmVhZFN0cmVhbShpbWFnZVBhdGgpO1xyXG4gICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgZmlsZVN0cmVhbSwge1xyXG4gICAgICBmaWxlbmFtZTogcmVxdWlyZSgncGF0aCcpLmJhc2VuYW1lKGltYWdlUGF0aCksXHJcbiAgICAgIGNvbnRlbnRUeXBlOiAnaW1hZ2UvanBlZydcclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IGF4aW9zLnBvc3QodXBsb2FkVXJsLCBmb3JtRGF0YSwge1xyXG4gICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgLi4uZm9ybURhdGEuZ2V0SGVhZGVycygpXHJcbiAgICAgIH0sXHJcbiAgICAgIHRpbWVvdXQ6IDYwMDAwXHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn4pyFIEltYWdlIHVwbG9hZGVkIHRvIEJpcmQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICByZXR1cm4gbWVkaWFVcmw7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBCaXJkIGltYWdlIHVwbG9hZCBmYWlsZWQ6Jywge1xyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlPy5kYXRhLFxyXG4gICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXNcclxuICAgIH0pO1xyXG5cclxuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHVwbG9hZCBpbWFnZSB0byBCaXJkOiAke2Vycm9yLnJlc3BvbnNlPy5kYXRhPy5tZXNzYWdlIHx8IGVycm9yLm1lc3NhZ2V9YCk7XHJcbiAgfVxyXG59XHJcblxyXG4vLyDwn5WK77iPIFNlbmQgaW1hZ2UgbWVzc2FnZSB2aWEgQmlyZCBBUEkgdXNpbmcgbWVkaWEgVVJMXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZW5kQmlyZEltYWdlTWVzc2FnZSh0bzogc3RyaW5nLCBtZWRpYVVybDogc3RyaW5nLCBjYXB0aW9uPzogc3RyaW5nKSB7XHJcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuQklSRF9BUElfS0VZO1xyXG5cclxuICBpZiAoIWFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdCSVJEX0FQSV9LRVkgaXMgbm90IGNvbmZpZ3VyZWQgaW4gZW52aXJvbm1lbnQgdmFyaWFibGVzJyk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc29sZS5sb2coJ/CflYrvuI8gU2VuZGluZyBCaXJkIGltYWdlIG1lc3NhZ2U6JywgeyB0bywgbWVkaWFVcmwsIGNhcHRpb24gfSk7XHJcblxyXG4gICAgY29uc3Qgd29ya3NwYWNlSWQgPSAnMmQ3YTFlMDMtMjVlNC00MDFlLWJmMWUtMGFjZTU0NTY3M2Q3JztcclxuICAgIGNvbnN0IGNoYW5uZWxJZCA9ICc4ZTA0NjAzNC1iY2E3LTUxMjQtODlkMC0xYTY0YzFjYmU4MTknO1xyXG5cclxuICAgIGNvbnN0IHBheWxvYWQgPSB7XHJcbiAgICAgIHJlY2VpdmVyOiB7XHJcbiAgICAgICAgY29udGFjdHM6IFtcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaWRlbnRpZmllclZhbHVlOiB0byxcclxuICAgICAgICAgICAgaWRlbnRpZmllcktleTogXCJwaG9uZW51bWJlclwiXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXVxyXG4gICAgICB9LFxyXG4gICAgICBib2R5OiB7XHJcbiAgICAgICAgdHlwZTogXCJpbWFnZVwiLFxyXG4gICAgICAgIGltYWdlOiB7XHJcbiAgICAgICAgICBpbWFnZXM6IFtcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGFsdFRleHQ6IGNhcHRpb24gfHwgXCLYqtmC2LHZitixINin2YTZhdiu2KrYqNixXCIsXHJcbiAgICAgICAgICAgICAgbWVkaWFVcmw6IG1lZGlhVXJsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIF1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KFxyXG4gICAgICBgaHR0cHM6Ly9hcGkuYmlyZC5jb20vd29ya3NwYWNlcy8ke3dvcmtzcGFjZUlkfS9jaGFubmVscy8ke2NoYW5uZWxJZH0vbWVzc2FnZXNgLFxyXG4gICAgICBwYXlsb2FkLFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEFjY2Vzc0tleSAke2FwaUtleX1gLFxyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRpbWVvdXQ6IDMwMDAwLCAvLyAzMCBzZWNvbmQgdGltZW91dFxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfinIUgQmlyZCBpbWFnZSBzZW50IHN1Y2Nlc3NmdWxseTonLCB7XHJcbiAgICAgIG1lc3NhZ2VJZDogcmVzcG9uc2UuZGF0YS5pZCxcclxuICAgICAgc3RhdHVzOiByZXNwb25zZS5kYXRhLnN0YXR1cyxcclxuICAgICAgdG86IHRvXHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBtZXNzYWdlSWQ6IHJlc3BvbnNlLmRhdGEuaWQsXHJcbiAgICAgIHN0YXR1czogcmVzcG9uc2UuZGF0YS5zdGF0dXMsXHJcbiAgICAgIGRhdGE6IHJlc3BvbnNlLmRhdGFcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgY29uc29sZS5lcnJvcign4p2MIEJpcmQgaW1hZ2Ugc2VuZCBmYWlsZWQ6Jywge1xyXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgcmVzcG9uc2U6IGVycm9yLnJlc3BvbnNlPy5kYXRhLFxyXG4gICAgICBzdGF0dXM6IGVycm9yLnJlc3BvbnNlPy5zdGF0dXNcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICBlcnJvcjogZXJyb3IucmVzcG9uc2U/LmRhdGE/Lm1lc3NhZ2UgfHwgZXJyb3IubWVzc2FnZVxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIPCflYrvuI8gVGVzdCBCaXJkIEFQSSBjb25uZWN0aW9uXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0QmlyZENvbm5lY3Rpb24oKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGNvbmZpZyA9IHZhbGlkYXRlQmlyZENvbmZpZygpO1xyXG4gICAgY29uc29sZS5sb2coJ/CflYrvuI8gQmlyZCBjb25maWd1cmF0aW9uIHZhbGlkYXRlZDonLCB7XHJcbiAgICAgIGhhc0FwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgd2hhdHNhcHBOdW1iZXI6IGNvbmZpZy53aGF0c2FwcE51bWJlclxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gWW91IGNvdWxkIGFkZCBhIHRlc3QgQVBJIGNhbGwgaGVyZSBpZiBCaXJkIHByb3ZpZGVzIGEgdGVzdCBlbmRwb2ludFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ0JpcmQgY29uZmlndXJhdGlvbiBpcyB2YWxpZCcsXHJcbiAgICAgIGNvbmZpZ1xyXG4gICAgfTtcclxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgQmlyZCBjb25maWd1cmF0aW9uIHRlc3QgZmFpbGVkOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiYXhpb3MiLCJzZW5kQmlyZE1lc3NhZ2UiLCJ0byIsInRleHQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiQklSRF9BUElfS0VZIiwiRXJyb3IiLCJjb25zb2xlIiwibG9nIiwic3Vic3RyaW5nIiwid29ya3NwYWNlSWQiLCJjaGFubmVsSWQiLCJwYXlsb2FkIiwicmVjZWl2ZXIiLCJjb250YWN0cyIsImlkZW50aWZpZXJWYWx1ZSIsImlkZW50aWZpZXJLZXkiLCJib2R5IiwidHlwZSIsInJlc3BvbnNlIiwicG9zdCIsImhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwidGltZW91dCIsIm1lc3NhZ2VJZCIsImRhdGEiLCJpZCIsInN0YXR1cyIsInN1Y2Nlc3MiLCJlcnJvciIsIm1lc3NhZ2UiLCJ2YWxpZGF0ZUJpcmRDb25maWciLCJ3aGF0c2FwcE51bWJlciIsIkJJUkRfV0hBVFNBUFBfTlVNQkVSIiwid2FybiIsInNlbmRCaXJkVGVtcGxhdGVNZXNzYWdlIiwicHJvamVjdElkIiwidGVtcGxhdGVWZXJzaW9uIiwicGhvbmVOdW1iZXIiLCJwYXJhbWV0ZXJzIiwibG9jYWxlIiwicGFyYW1ldGVyc0NvdW50IiwibGVuZ3RoIiwidGVtcGxhdGUiLCJ2ZXJzaW9uIiwidXBsb2FkSW1hZ2VUb0JpcmQiLCJpbWFnZVBhdGgiLCJwcmVzaWduUmVzcG9uc2UiLCJjb250ZW50VHlwZSIsInVwbG9hZFVybCIsIm1lZGlhVXJsIiwiRm9ybURhdGEiLCJyZXF1aXJlIiwiZnMiLCJmb3JtRGF0YSIsIk9iamVjdCIsImVudHJpZXMiLCJ1cGxvYWRGb3JtRGF0YSIsImZvckVhY2giLCJrZXkiLCJ2YWx1ZSIsImFwcGVuZCIsImZpbGVTdHJlYW0iLCJjcmVhdGVSZWFkU3RyZWFtIiwiZmlsZW5hbWUiLCJiYXNlbmFtZSIsImdldEhlYWRlcnMiLCJzZW5kQmlyZEltYWdlTWVzc2FnZSIsImNhcHRpb24iLCJpbWFnZSIsImltYWdlcyIsImFsdFRleHQiLCJ0ZXN0QmlyZENvbm5lY3Rpb24iLCJjb25maWciLCJoYXNBcGlLZXkiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/bird-service.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbird%2Fwebhook%2Froute&page=%2Fapi%2Fbird%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbird%2Fwebhook%2Froute.ts&appDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbird%2Fwebhook%2Froute&page=%2Fapi%2Fbird%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbird%2Fwebhook%2Froute.ts&appDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_New_folder_twilio_new_twilio_chat_app_api_bird_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/bird/webhook/route.ts */ \"(rsc)/./app/api/bird/webhook/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/bird/webhook/route\",\n        pathname: \"/api/bird/webhook\",\n        filename: \"route\",\n        bundlePath: \"app/api/bird/webhook/route\"\n    },\n    resolvedPagePath: \"D:\\\\New folder\\\\twilio_new\\\\twilio_chat\\\\app\\\\api\\\\bird\\\\webhook\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_New_folder_twilio_new_twilio_chat_app_api_bird_webhook_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZiaXJkJTJGd2ViaG9vayUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYmlyZCUyRndlYmhvb2slMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZiaXJkJTJGd2ViaG9vayUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDTmV3JTIwZm9sZGVyJTVDdHdpbGlvX25ldyU1Q3R3aWxpb19jaGF0JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDTmV3JTIwZm9sZGVyJTVDdHdpbGlvX25ldyU1Q3R3aWxpb19jaGF0JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PXN0YW5kYWxvbmUmcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDMEI7QUFDdkc7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHlHQUFtQjtBQUMzQztBQUNBLGNBQWMsa0VBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7O0FBRTFGIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXE5ldyBmb2xkZXJcXFxcdHdpbGlvX25ld1xcXFx0d2lsaW9fY2hhdFxcXFxhcHBcXFxcYXBpXFxcXGJpcmRcXFxcd2ViaG9va1xcXFxyb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJzdGFuZGFsb25lXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2JpcmQvd2ViaG9vay9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2JpcmQvd2ViaG9va1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYmlyZC93ZWJob29rL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcTmV3IGZvbGRlclxcXFx0d2lsaW9fbmV3XFxcXHR3aWxpb19jaGF0XFxcXGFwcFxcXFxhcGlcXFxcYmlyZFxcXFx3ZWJob29rXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbird%2Fwebhook%2Froute&page=%2Fapi%2Fbird%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbird%2Fwebhook%2Froute.ts&appDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/axios","vendor-chunks/@opentelemetry","vendor-chunks/asynckit","vendor-chunks/math-intrinsics","vendor-chunks/es-errors","vendor-chunks/form-data","vendor-chunks/call-bind-apply-helpers","vendor-chunks/debug","vendor-chunks/get-proto","vendor-chunks/has-symbols","vendor-chunks/gopd","vendor-chunks/function-bind","vendor-chunks/follow-redirects","vendor-chunks/supports-color","vendor-chunks/proxy-from-env","vendor-chunks/ms","vendor-chunks/hasown","vendor-chunks/has-tostringtag","vendor-chunks/has-flag","vendor-chunks/get-intrinsic","vendor-chunks/es-set-tostringtag","vendor-chunks/es-object-atoms","vendor-chunks/es-define-property","vendor-chunks/dunder-proto","vendor-chunks/delayed-stream","vendor-chunks/combined-stream"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fbird%2Fwebhook%2Froute&page=%2Fapi%2Fbird%2Fwebhook%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fbird%2Fwebhook%2Froute.ts&appDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5CNew%20folder%5Ctwilio_new%5Ctwilio_chat&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();